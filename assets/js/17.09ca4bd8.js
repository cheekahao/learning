(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{365:function(t,s,a){"use strict";a.r(s);var n=a(42),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"react"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react"}},[t._v("#")]),t._v(" React")]),t._v(" "),a("h2",{attrs:{id:"hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hook"}},[t._v("#")]),t._v(" Hook")]),t._v(" "),a("p",[a("code",[t._v("Hook")]),t._v("是"),a("code",[t._v("React")]),t._v("16.8的新增特性。可以在不编写"),a("code",[t._v("class")]),t._v("的情况下使用"),a("code",[t._v("state")]),t._v("以及其他的"),a("code",[t._v("React")]),t._v("特性。")]),t._v(" "),a("p",[a("code",[t._v("Hook")]),t._v("为已知的"),a("code",[t._v("React")]),t._v("概念提供了更直接的"),a("code",[t._v("API")]),t._v("："),a("code",[t._v("props")]),t._v("， "),a("code",[t._v("state")]),t._v("，"),a("code",[t._v("context")]),t._v("，"),a("code",[t._v("refs")]),t._v("以及生命周期。")]),t._v(" "),a("p",[t._v("可以使用"),a("code",[t._v("Hook")]),t._v("从组件中提取状态逻辑，使得这些逻辑可以单独测试并复用。"),a("code",[t._v("Hook")]),t._v("可以在无需修改组件结构的情况下复用状态逻辑。这使得在组件间或社区内共享"),a("code",[t._v("Hook")]),t._v("变得更便捷。")]),t._v(" "),a("ul",[a("li",[t._v("利于组件预编译，更易于优化")]),t._v(" "),a("li",[a("code",[t._v("class")]),t._v("组件会无意中鼓励开发者使用一些让优化措施无效的方案")]),t._v(" "),a("li",[a("code",[t._v("class")]),t._v("不能很好的压缩，并且会使热重载出现不稳定的情况")])]),t._v(" "),a("p",[a("code",[t._v("Hook")]),t._v("是一些可以让你在函数组件里“钩入”"),a("code",[t._v("React state")]),t._v("及生命周期等特性的函数。")]),t._v(" "),a("h3",{attrs:{id:"state-hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#state-hook"}},[t._v("#")]),t._v(" "),a("code",[t._v("State Hook")])]),t._v(" "),a("p",[a("code",[t._v("useState")]),t._v("通过在函数组件里调用它来给组件添加一些内部 "),a("code",[t._v("state")]),t._v("。"),a("code",[t._v("React")]),t._v("会在重复渲染时保留这个"),a("code",[t._v("state")]),t._v("。")]),t._v(" "),a("p",[t._v("不同于class组件"),a("code",[t._v("state")]),t._v("必须为一个对象，"),a("code",[t._v("useState")]),t._v("可以接受一个基本类型，也可以接受引用类型。")]),t._v(" "),a("p",[t._v("返回一对值：当前状态"),a("code",[t._v("state")]),t._v("和一个可以更新它的函数"),a("code",[t._v("setState")]),t._v("，可以在事件处理函数中或其他一些地方调用这个函数。")]),t._v(" "),a("p",[a("code",[t._v("useState")]),t._v("类似于"),a("code",[t._v("class")]),t._v("组件的"),a("code",[t._v("this.setState")]),t._v("，但是它不会把新的"),a("code",[t._v("state")]),t._v("和旧的"),a("code",[t._v("state")]),t._v("进行合并。")]),t._v(" "),a("p",[a("code",[t._v("state")]),t._v("不一定要是一个对象，且这个初始"),a("code",[t._v("state")]),t._v("参数只有在第一次渲染时会被用到")]),t._v(" "),a("p",[t._v("具体示例如下：")]),t._v(" "),a("div",{staticClass:"language-jsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-jsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useState "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Example")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 声明一个叫 “count” 的 state 变量。")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("You clicked ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v(" times")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onClick")]),a("span",{pre:!0,attrs:{class:"token script language-javascript"}},[a("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n        Click me\n      ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n    ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("code",[t._v("React")]),t._v("假设当你多次调用"),a("code",[t._v("useState")]),t._v("的时候，你能保证每次渲染时它们的调用顺序是不变的")]),t._v(" "),a("h3",{attrs:{id:"effect-hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#effect-hook"}},[t._v("#")]),t._v(" "),a("code",[t._v("Effect Hook")])]),t._v(" "),a("p",[a("code",[t._v("Effect Hook")]),t._v("可以让你在函数组件中执行副作用操作，类似于"),a("code",[t._v("componentDidMount")]),t._v("、"),a("code",[t._v("componentDidUpdate")]),t._v("、"),a("code",[t._v("componentWillUnmount")]),t._v("这三个生命周期。")]),t._v(" "),a("p",[a("code",[t._v("Effect Hook")]),t._v("会在每次渲染后都执行。但是与"),a("code",[t._v("componentDidMount")]),t._v("或"),a("code",[t._v("componentDidUpdate")]),t._v("不同，使用"),a("code",[t._v("useEffect")]),t._v("调度的"),a("code",[t._v("effect")]),t._v("不会阻塞浏览器更新屏幕，这让你的应用看起来响应更快。如果需要阻塞视图更新，可以使用"),a("code",[t._v("useLayoutEffect")]),t._v(" Hook")]),t._v(" "),a("p",[t._v("在"),a("code",[t._v("React")]),t._v("组件中有两种常见副作用操作：需要清除的和不需要清除的。需要清除的"),a("code",[t._v("effect")]),t._v("可以在"),a("code",[t._v("useEffect")]),t._v("中返回一个函数，"),a("code",[t._v("React")]),t._v("将会在执行清除操作时调用它。")]),t._v(" "),a("p",[a("code",[t._v("React")]),t._v("会在执行当前"),a("code",[t._v("effect")]),t._v("之前对上一个"),a("code",[t._v("effect")]),t._v("进行清除。")]),t._v(" "),a("p",[t._v("如果某些特定值在两次重渲染之间没有发生变化，可以通过传递数组作为"),a("code",[t._v("useEffect")]),t._v("的第二个可选参数，通知 React 跳过对 effect 的调用。")]),t._v(" "),a("p",[t._v("如果想执行只运行一次的"),a("code",[t._v("effect")]),t._v("（仅在组件挂载和卸载时执行），可以传递一个空数组"),a("code",[t._v("[]")]),t._v("作为第二个参数。")]),t._v(" "),a("p",[t._v("具体见下例：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useEffect "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("FriendStatus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("You clicked ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(" times")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("isOnline"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setIsOnline"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleStatusChange")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("status")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setIsOnline")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("status"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isOnline"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    ChatAPI"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribeToFriendStatus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("friend"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handleStatusChange"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 清除副作用")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cleanup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      ChatAPI"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unsubscribeFromFriendStatus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("friend"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handleStatusChange"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("friend"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 仅在 props.friend.id 发生变化时，重新订阅")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isOnline "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Loading...'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" isOnline "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Online'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Offline'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"hook规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hook规则"}},[t._v("#")]),t._v(" "),a("code",[t._v("Hook")]),t._v("规则")]),t._v(" "),a("p",[t._v("Hook 就是"),a("code",[t._v("JavaScript")]),t._v("函数，但是要注意两点规则：")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("只能在函数最外层调用"),a("code",[t._v("Hook")])]),t._v("，不能在循环、条件判断或者子函数中调用。这样能确保"),a("code",[t._v("Hook")]),t._v("在每一次渲染中都按照同样的顺序被调用。让"),a("code",[t._v("React")]),t._v("能够在多次的"),a("code",[t._v("useState")]),t._v("和"),a("code",[t._v("useEffect")]),t._v("调用之间保持"),a("code",[t._v("hook")]),t._v("状态的正确")]),t._v(" "),a("li",[a("strong",[t._v("只能在"),a("code",[t._v("React")]),t._v("的函数组件中调用"),a("code",[t._v("Hook")])]),t._v("，不要在其他 "),a("code",[t._v("JavaScript")]),t._v("函数中调用。另外自定义的"),a("code",[t._v("Hook")]),t._v("中也可以调用")])]),t._v(" "),a("p",[a("code",[t._v("React")]),t._v("靠的是"),a("code",[t._v("Hook")]),t._v("调用的顺序来确定哪个"),a("code",[t._v("state")]),t._v("对应哪个"),a("code",[t._v("useState")])]),t._v(" "),a("h3",{attrs:{id:"其他hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他hook"}},[t._v("#")]),t._v(" 其他"),a("code",[t._v("Hook")])]),t._v(" "),a("p",[a("code",[t._v("useContext")]),t._v("接收一个"),a("code",[t._v("context")]),t._v("对象（"),a("code",[t._v("React.createContext")]),t._v("的返回值）并返回该"),a("code",[t._v("context")]),t._v("的当前值。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MyContext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("code",[t._v("useReducer")]),t._v("，"),a("code",[t._v("useState")]),t._v("的替代方案。接收一个形如"),a("code",[t._v("(state, action) => newState")]),t._v("的"),a("code",[t._v("reducer")]),t._v("，并返回当前的"),a("code",[t._v("state")]),t._v(" 以及与其配套的"),a("code",[t._v("dispatch")]),t._v("方法。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dispatch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useReducer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reducer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" initialArg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" init"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("code",[t._v("useLayoutEffect")]),t._v("其函数签名与"),a("code",[t._v("useEffect")]),t._v("相同，但它会在所有的"),a("code",[t._v("DOM")]),t._v("变更之后同步调用"),a("code",[t._v("effect")]),t._v("，会阻塞视图更新")]),t._v(" "),a("h3",{attrs:{id:"自定义hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义hook"}},[t._v("#")]),t._v(" 自定义"),a("code",[t._v("Hook")])]),t._v(" "),a("p",[t._v("自定义"),a("code",[t._v("Hook")]),t._v("是一个函数，其名称以"),a("code",[t._v("use")]),t._v("开头，函数内部可以调用其他的"),a("code",[t._v("Hook")]),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"react的生命周期"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react的生命周期"}},[t._v("#")]),t._v(" "),a("code",[t._v("React")]),t._v("的生命周期")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("componentDidMount")]),t._v("，组件第一次被渲染到"),a("code",[t._v("DOM")]),t._v("中的时候")]),t._v(" "),a("li",[a("code",[t._v("componentWillUnmount")]),t._v("，组件被删除的时候")])]),t._v(" "),a("p",[t._v("当组件实例被创建并插入"),a("code",[t._v("DOM")]),t._v("中时(挂载)，其生命周期调用顺序如下：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("constructor()")])]),t._v(" "),a("li",[a("code",[t._v("static getDerivedStateFromProps()")])]),t._v(" "),a("li",[a("code",[t._v("render()")])]),t._v(" "),a("li",[a("code",[t._v("componentDidMount()")])])]),t._v(" "),a("p",[t._v("当组件的"),a("code",[t._v("props")]),t._v("或"),a("code",[t._v("state")]),t._v("发生变化时会触发更新。组件更新的生命周期调用顺序如下：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("static getDerivedStateFromProps()")])]),t._v(" "),a("li",[a("code",[t._v("shouldComponentUpdate()")])]),t._v(" "),a("li",[a("code",[t._v("render()")])]),t._v(" "),a("li",[a("code",[t._v("getSnapshotBeforeUpdate()")])]),t._v(" "),a("li",[a("code",[t._v("componentDidUpdate()")])])]),t._v(" "),a("p",[t._v("当组件从"),a("code",[t._v("DOM")]),t._v("中移除(卸载)时会调用如下方法：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("componentWillUnmount()")])])]),t._v(" "),a("p",[t._v("错误处理，当渲染过程，生命周期，或子组件的构造函数中抛出错误时，会调用如下方法：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("static getDerivedStateFromError()")])]),t._v(" "),a("li",[a("code",[t._v("componentDidCatch()")])])]),t._v(" "),a("h2",{attrs:{id:"fiber"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fiber"}},[t._v("#")]),t._v(" Fiber")])])}),[],!1,null,null,null);s.default=e.exports}}]);